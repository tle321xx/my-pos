<div class="container-fluid p-4">
  <h2 class="fw-bold mb-4"><i class="bi bi-speedometer2"></i> ภาพรวมร้านค้า</h2>

  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card border-0 shadow-sm stat-card h-100">
        <div class="card-body d-flex align-items-center gap-3">
          <div class="icon-box bg-success bg-opacity-10 text-success">
            <i class="bi bi-currency-dollar"></i>
          </div>
          <div>
            <div class="text-muted small">ยอดขายวันนี้</div>
            <h4 class="fw-bold m-0">{{ stats.todaySales | number }} ฿</h4>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card border-0 shadow-sm stat-card h-100">
        <div class="card-body d-flex align-items-center gap-3">
          <div class="icon-box bg-primary bg-opacity-10 text-primary">
            <i class="bi bi-receipt"></i>
          </div>
          <div>
            <div class="text-muted small">จำนวนบิล</div>
            <h4 class="fw-bold m-0">{{ stats.totalOrders | number }}</h4>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card border-0 shadow-sm stat-card h-100">
        <div class="card-body d-flex align-items-center gap-3">
          <div class="icon-box bg-info bg-opacity-10 text-info">
            <i class="bi bi-person-plus-fill"></i>
          </div>
          <div>
            <div class="text-muted small">สมาชิกใหม่</div>
            <h4 class="fw-bold m-0">{{ stats.newMembers }} คน</h4>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card border-0 shadow-sm stat-card h-100">
        <div class="card-body d-flex align-items-center gap-3">
          <div class="icon-box bg-warning bg-opacity-10 text-warning">
            <i class="bi bi-exclamation-triangle-fill"></i>
          </div>
          <div>
            <div class="text-muted small">สินค้าใกล้หมด</div>
            <h4 class="fw-bold m-0">{{ stats.lowStock }} รายการ</h4>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white py-3 border-bottom-0">
      <h5 class="fw-bold m-0"><i class="bi bi-clock-history"></i> รายการขายล่าสุด</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
  <thead class="table-light">
    <tr>
      <th class="ps-4">เลขที่บิล</th>
      <th>เวลา</th>
      <th>พนักงานขาย</th>
      <th>จำนวนรายการ</th>
      <th class="text-end">ยอดรวม</th>
      <th class="text-end pe-4">จัดการ</th> 
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let order of recentOrders">
      <td class="ps-4 fw-bold text-primary">{{ order.receiptNo || order.id }}</td>
      <td class="text-muted">{{ order.time }} น.</td>
      <td>
        <span class="badge bg-light text-dark border"><i class="bi bi-person"></i> {{ order.staff }}</span>
      </td>
      <td>{{ order.items || '-' }}</td>
      <td class="text-end fw-bold text-success">+{{ order.total | number }} ฿</td>
      
      <td class="text-end pe-4">
        <button class="btn btn-sm btn-outline-primary" (click)="openOrderDetails(order.id)">
          <i class="bi bi-eye-fill"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>

<app-order-detail-modal></app-order-detail-modal>
    </div>
    <div class="card-footer bg-white text-center py-3">
       <small class="text-muted">แสดง 5 รายการล่าสุด</small>
    </div>
  </div>
  <div class="row g-4 mb-4">
  <div class="col-md-8">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-header bg-white py-3">
        <h5 class="fw-bold m-0"><i class="bi bi-graph-up"></i> แนวโน้มยอดขายวันนี้</h5>
      </div>
      <div class="card-body">
        <canvas baseChart
          [data]="lineChartData"
          [options]="lineChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-header bg-white py-3">
        <h5 class="fw-bold m-0"><i class="bi bi-pie-chart"></i> สัดส่วนสินค้า</h5>
      </div>
      <div class="card-body d-flex align-items-center justify-content-center">
        <canvas baseChart
          [data]="doughnutChartData"
          [type]="'doughnut'">
        </canvas>
      </div>
    </div>
  </div>
</div>
</div>